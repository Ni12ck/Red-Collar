# –ì–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–µ —Ç–æ—á–∫–∏ –∏ —Å–æ–æ–±—â–µ–Ω–∏—è API

**GeoDjango + PostGIS** REST API –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≥–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–º–∏ —Ç–æ—á–∫–∞–º–∏ –∏ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –ø–æ–∏—Å–∫–∞ –ø–æ —Ä–∞–¥–∏—É—Å—É. –ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –≥–µ–æ–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –¥–ª—è —Ç–æ—á–Ω—ã—Ö —Ä–∞—Å—á–µ—Ç–æ–≤ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–π –∏ –≤—ã—Å–æ–∫–æ–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞.

## –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **Python 3.11**
- **Django 5.1** (—Å GeoDjango)
- **Django REST Framework (DRF)**
- **PostgreSQL 15 + PostGIS 3.4** (–ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ–Ω–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö)
- **Docker & Docker Compose**
- **JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è** (djangorestframework-simplejwt)
- **pgAdmin 4** (–≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ë–î)
- **GDAL/GEOS** (–≥–µ–æ–ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ–Ω–Ω—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏)
- **WGS84 (EPSG:4326)** (—Å–∏—Å—Ç–µ–º–∞ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç)

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

–ü—Ä–æ–µ–∫—Ç –ø–æ—Å—Ç—Ä–æ–µ–Ω –Ω–∞ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–π –≥–µ–æ–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ:

```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚Üí Django REST API ‚Üí GeoDjango ORM ‚Üí PostGIS ‚Üí PostgreSQL
                                      ‚Üì
                               pgAdmin (—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ë–î)
```

### –ö–ª—é—á–µ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:
- **GeoDjango**: Django —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ –¥–ª—è –≥–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö
- **PostGIS**: –ü—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ–Ω–Ω–æ–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ PostgreSQL
- **pgAdmin**: –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
- **Docker**: –ü–æ–ª–Ω–∞—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤

## –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

### –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:
- ‚úÖ **GeoDjango + PostGIS**: –ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω–∞—è –≥–µ–æ–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞
- ‚úÖ **–ü—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã**: –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ–∏—Å–∫ –ø–æ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—é —á–µ—Ä–µ–∑ PostGIS
- ‚úÖ **WGS84 –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã**: –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –≥–µ–æ–¥–µ–∑–∏—á–µ—Å–∫–∞—è —Å–∏—Å—Ç–µ–º–∞ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç
- ‚úÖ **Spatial –∏–Ω–¥–µ–∫—Å—ã**: GiST –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –≥–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–æ–≥–æ –ø–æ–∏—Å–∫–∞
- ‚úÖ **–ì–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏**: –¢–æ—á–Ω—ã–µ —Ä–∞—Å—á–µ—Ç—ã —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–π –∏ –≥–µ–æ–º–µ—Ç—Ä–∏—á–µ—Å–∫–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
- ‚úÖ **JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è**: –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- ‚úÖ **RESTful API**: –ü–æ–ª–Ω—ã–π CRUD —Å –≥–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏
- ‚úÖ **Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è**: –ü–æ–ª–Ω–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö
- ‚úÖ **pgAdmin**: –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è PostgreSQL + PostGIS

### API –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã:
- `POST /api/token/` - –ü–æ–ª—É—á–µ–Ω–∏–µ JWT —Ç–æ–∫–µ–Ω–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- `POST /api/points/` - –°–æ–∑–¥–∞–Ω–∏–µ –≥–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–æ–π —Ç–æ—á–∫–∏
- `GET /api/points/` - –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —Ç–æ—á–µ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `GET /api/points/{id}/` - –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–æ—á–∫–µ
- `PATCH /api/points/{id}/` - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö —Ç–æ—á–∫–∏
- `DELETE /api/points/{id}/` - –£–¥–∞–ª–µ–Ω–∏–µ —Ç–æ—á–∫–∏
- `GET /api/points/search/?latitude=X&longitude=Y&radius=Z` - **GeoDjango –ø–æ–∏—Å–∫ —Ç–æ—á–µ–∫ –≤ —Ä–∞–¥–∏—É—Å–µ**
- `POST /api/messages/` - –°–æ–∑–¥–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –¥–ª—è —Ç–æ—á–∫–∏
- `GET /api/messages/` - –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `GET /api/messages/search/?latitude=X&longitude=Y&radius=Z` - **GeoDjango –ø–æ–∏—Å–∫ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ —Ä–∞–¥–∏—É—Å–µ**

### –ü—Ä–∏–º–µ—Ä—ã –≥–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤:

```bash
# –ü–æ–∏—Å–∫ —Ç–æ—á–µ–∫ –≤ —Ä–∞–¥–∏—É—Å–µ 1 –∫–º –æ—Ç –ö—Ä–∞—Å–Ω–æ–π –ø–ª–æ—â–∞–¥–∏
GET /api/points/search/?latitude=55.7558&longitude=37.6176&radius=1.0

# –ü–æ–∏—Å–∫ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ —Ä–∞–¥–∏—É—Å–µ 5 –∫–º –æ—Ç —Ü–µ–Ω—Ç—Ä–∞ –ú–æ—Å–∫–≤—ã
GET /api/messages/search/?latitude=55.7558&longitude=37.6176&radius=5.0
```

### –ì–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:
- **–¢–æ—á–Ω—ã–µ —Ä–∞—Å—á–µ—Ç—ã**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ PostGIS —Ñ—É–Ω–∫—Ü–∏–π –≤–º–µ—Å—Ç–æ –ø—Ä–∏–±–ª–∏–∂–µ–Ω–Ω—ã—Ö —Ñ–æ—Ä–º—É–ª
- **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: Spatial –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞
- **–ì–∏–±–∫–æ—Å—Ç—å**: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ç–∏–ø–æ–≤ –≥–µ–æ–º–µ—Ç—Ä–∏–∏ (Point, LineString, Polygon)
- **–°—Ç–∞–Ω–¥–∞—Ä—Ç—ã**: WGS84 —Å–∏—Å—Ç–µ–º–∞ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç (EPSG:4326)

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

## –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞

### –í–∞—Ä–∏–∞–Ω—Ç 1: Docker Compose (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

#### –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
- Docker –∏ Docker Compose —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –Ω–∞ —Å–∏—Å—Ç–µ–º–µ

#### –ë—ã—Å—Ç—Ä—ã–π –∑–∞–ø—É—Å–∫

```bash
# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone <repository-url>
cd geo_points

# –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞–π–ª —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è
cp docker-env-example.txt .env

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã
docker-compose up -d
```

#### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã Docker Compose

> üìã **–°–ø—Ä–∞–≤–∫–∞**: –ü–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ –∫–æ–º–∞–Ω–¥ –≤ [COMMANDS.md](COMMANDS.md)

```bash
# –°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫
docker-compose build              # –°–æ–±—Ä–∞—Ç—å Docker –æ–±—Ä–∞–∑—ã
docker-compose up -d              # –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–∏—Å—ã –≤ —Ñ–æ–Ω–µ
docker-compose up                 # –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å –≤—ã–≤–æ–¥–æ–º –ª–æ–≥–æ–≤

# –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞–º–∏
docker-compose down               # –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–µ—Ä–≤–∏—Å—ã
docker-compose restart            # –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–∏—Å—ã
docker-compose ps                 # –ü–æ–∫–∞–∑–∞—Ç—å —Å—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–æ–≤

# –õ–æ–≥–∏
docker-compose logs -f            # –í—Å–µ –ª–æ–≥–∏ (—Å–ª–µ–¥–∏—Ç—å –∑–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è–º–∏)
docker-compose logs -f web        # –õ–æ–≥–∏ —Ç–æ–ª—å–∫–æ web —Å–µ—Ä–≤–∏—Å–∞
docker-compose logs -f db         # –õ–æ–≥–∏ —Ç–æ–ª—å–∫–æ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
docker-compose logs -f pgadmin    # –õ–æ–≥–∏ —Ç–æ–ª—å–∫–æ pgAdmin

# Django –∫–æ–º–∞–Ω–¥—ã
docker-compose exec web python manage.py migrate         # –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏
docker-compose exec web python manage.py makemigrations  # –°–æ–∑–¥–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏
docker-compose exec web python manage.py test            # –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã
docker-compose exec web python manage.py createsuperuser # –°–æ–∑–¥–∞—Ç—å —Å—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
docker-compose exec web bash                             # –û—Ç–∫—Ä—ã—Ç—å shell –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ

# –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
docker-compose exec db psql -U geo_points_user -d geo_points  # PostgreSQL shell

# –û—á–∏—Å—Ç–∫–∞
docker-compose down -v            # –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏ —É–¥–∞–ª–∏—Ç—å volumes (—É–¥–∞–ª–∏—Ç –¥–∞–Ω–Ω—ã–µ!)
```

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ –∞–¥—Ä–µ—Å—É: http://localhost:8000

#### –î–æ—Å—Ç—É–ø –∫ —Å–µ—Ä–≤–∏—Å–∞–º
- **Django API**: http://localhost:8000
- **Django Admin**: http://localhost:8000/admin/
- **pgAdmin**: http://localhost:5050

#### –£—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
**Django —Å—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:**
- **–õ–æ–≥–∏–Ω**: admin
- **–ü–∞—Ä–æ–ª—å**: admin123
- **Email**: admin@example.com

**pgAdmin:**
- **Email**: admin@geo-points.com
- **–ü–∞—Ä–æ–ª—å**: admin123

#### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ pgAdmin
–ü–æ—Å–ª–µ –ø–µ—Ä–≤–æ–≥–æ –≤—Ö–æ–¥–∞ –≤ pgAdmin:

1. **–°–æ–∑–¥–∞–π—Ç–µ —Å–µ—Ä–≤–µ—Ä:**
   - –ü—Ä–∞–≤–æ–π –∫–Ω–æ–ø–∫–æ–π –Ω–∞ "Servers" ‚Üí "Create" ‚Üí "Server"
   - –í–∫–ª–∞–¥–∫–∞ "General": Name = "Geo Points DB"
   - –í–∫–ª–∞–¥–∫–∞ "Connection":
     - Host name/address = `db` (–∏–ª–∏ `localhost` –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∏–∑–≤–Ω–µ)
     - Port = `5432`
     - Username = `geo_points_user`
     - Password = `geo_points_password`
     - Database = `geo_points`

2. **–ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å** –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –∏ —É–ø—Ä–∞–≤–ª—è–π—Ç–µ –¥–∞–Ω–Ω—ã–º–∏

### –í–∞—Ä–∏–∞–Ω—Ç 2: –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ (–±–µ–∑ Docker)

#### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è
python -m venv venv
venv\Scripts\activate  # Windows
# –∏–ª–∏
source venv/bin/activate  # Linux/Mac

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
pip install -r requirements.txt
```

#### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ PostgreSQL

–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ PostgreSQL –∏ —Å–æ–∑–¥–∞–π—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö:

```sql
CREATE DATABASE geo_points;
CREATE USER geo_points_user WITH PASSWORD 'geo_points_password';
GRANT ALL PRIVILEGES ON DATABASE geo_points TO geo_points_user;
```

#### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:

```bash
cp docker-env-example.txt .env
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ .env —Ñ–∞–π–ª —Å –≤–∞—à–∏–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ PostgreSQL
```

#### 4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π
python manage.py makemigrations

# –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π
python manage.py migrate
```

#### 5. –°–æ–∑–¥–∞–Ω–∏–µ —Å—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

```bash
python manage.py createsuperuser
```

#### 6. –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞

```bash
python manage.py runserver
```

–°–µ—Ä–≤–µ—Ä –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É: http://127.0.0.1:8000/

## API –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

#### –ü–æ–ª—É—á–µ–Ω–∏–µ JWT —Ç–æ–∫–µ–Ω–∞
```http
POST /api/token/
Content-Type: application/json

{
    "username": "your_username",
    "password": "your_password"
}
```

#### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ JWT —Ç–æ–∫–µ–Ω–∞
```http
POST /api/token/refresh/
Content-Type: application/json

{
    "refresh": "your_refresh_token"
}
```

### –†–∞–±–æ—Ç–∞ —Å —Ç–æ—á–∫–∞–º–∏

#### –°–æ–∑–¥–∞–Ω–∏–µ —Ç–æ—á–∫–∏
```http
POST /api/points/
Authorization: Bearer <your_jwt_token>
Content-Type: application/json

{
    "latitude": 55.7558,
    "longitude": 37.6176,
    "title": "–ö—Ä–∞—Å–Ω–∞—è –ø–ª–æ—â–∞–¥—å",
    "description": "–ì–ª–∞–≤–Ω–∞—è –ø–ª–æ—â–∞–¥—å –ú–æ—Å–∫–≤—ã"
}
```

#### –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —Ç–æ—á–µ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
```http
GET /api/points/
Authorization: Bearer <your_jwt_token>
```

#### –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π —Ç–æ—á–∫–∏
```http
GET /api/points/{id}/
Authorization: Bearer <your_jwt_token>
```

#### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ—á–∫–∏
```http
PATCH /api/points/{id}/
Authorization: Bearer <your_jwt_token>
Content-Type: application/json

{
    "title": "–ù–æ–≤–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ"
}
```

#### –£–¥–∞–ª–µ–Ω–∏–µ —Ç–æ—á–∫–∏
```http
DELETE /api/points/{id}/
Authorization: Bearer <your_jwt_token>
```

#### –ü–æ–∏—Å–∫ —Ç–æ—á–µ–∫ –≤ —Ä–∞–¥–∏—É—Å–µ
```http
GET /api/points/search/?latitude=55.7558&longitude=37.6176&radius=1.0
Authorization: Bearer <your_jwt_token>
```

### –†–∞–±–æ—Ç–∞ —Å —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏

#### –°–æ–∑–¥–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –∫ —Ç–æ—á–∫–µ
```http
POST /api/messages/
Authorization: Bearer <your_jwt_token>
Content-Type: application/json

{
    "point": 1,
    "content": "–¢–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è"
}
```

#### –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
```http
GET /api/messages/
Authorization: Bearer <your_jwt_token>
```

#### –ü–æ–∏—Å–∫ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ —Ä–∞–¥–∏—É—Å–µ
```http
GET /api/messages/search/?latitude=55.7558&longitude=37.6176&radius=1.0
Authorization: Bearer <your_jwt_token>
```

## –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö

### Point (–¢–æ—á–∫–∞) - GeoDjango –º–æ–¥–µ–ª—å
- `id`: –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä
- `user`: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å-–≤–ª–∞–¥–µ–ª–µ—Ü —Ç–æ—á–∫–∏
- `location`: **GeoDjango PointField** —Å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º–∏ (WGS84, EPSG:4326)
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç—Å—è –∏–∑ `latitude`/`longitude` –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏
  - –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ–Ω–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã –∏ –∑–∞–ø—Ä–æ—Å—ã PostGIS
- `latitude`: –®–∏—Ä–æ—Ç–∞ (-90 –¥–æ 90) - **–≤—ã—á–∏—Å–ª—è–µ–º–æ–µ —Å–≤–æ–π—Å—Ç–≤–æ** –∏–∑ `location`
- `longitude`: –î–æ–ª–≥–æ—Ç–∞ (-180 –¥–æ 180) - **–≤—ã—á–∏—Å–ª—è–µ–º–æ–µ —Å–≤–æ–π—Å—Ç–≤–æ** –∏–∑ `location`
- `title`: –ù–∞–∑–≤–∞–Ω–∏–µ —Ç–æ—á–∫–∏ (–º–∞–∫—Å. 200 —Å–∏–º–≤–æ–ª–æ–≤)
- `description`: –û–ø–∏—Å–∞–Ω–∏–µ —Ç–æ—á–∫–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- `created_at`: –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è
- `updated_at`: –î–∞—Ç–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- `messages_count`: –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–æ–±—â–µ–Ω–∏–π (–≤—ã—á–∏—Å–ª—è–µ–º–æ–µ –ø–æ–ª–µ)

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ GeoDjango:**
- –ü—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π GiST –∏–Ω–¥–µ–∫—Å –Ω–∞ –ø–æ–ª–µ `location`
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≥–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ —á–µ—Ä–µ–∑ PostGIS
- –¢–æ—á–Ω—ã–µ –≥–µ–æ–¥–µ–∑–∏—á–µ—Å–∫–∏–µ —Ä–∞—Å—á–µ—Ç—ã —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–π

### Message (–°–æ–æ–±—â–µ–Ω–∏–µ)
- `id`: –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä
- `user`: –ê–≤—Ç–æ—Ä —Å–æ–æ–±—â–µ–Ω–∏—è
- `point`: –°–≤—è–∑–∞–Ω–Ω–∞—è —Ç–æ—á–∫–∞
- `content`: –¢–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è
- `created_at`: –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è

## –ì–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ GeoDjango + PostGIS

–ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **GeoDjango + PostGIS** –¥–ª—è –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç—ã —Å –≥–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏:

### –ü—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ–Ω–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:
- **PostGIS —Ñ—É–Ω–∫—Ü–∏–∏**: –ù–∞—Ç–∏–≤–Ω—ã–µ –≥–µ–æ–¥–µ–∑–∏—á–µ—Å–∫–∏–µ —Ä–∞—Å—á–µ—Ç—ã –≤–º–µ—Å—Ç–æ –ø—Ä–∏–±–ª–∏–∂–µ–Ω–Ω—ã—Ö —Ñ–æ—Ä–º—É–ª
- **WGS84 —Å–∏—Å—Ç–µ–º–∞ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç**: –°—Ç–∞–Ω–¥–∞—Ä—Ç EPSG:4326 –¥–ª—è GPS-—Å–æ–≤–º–µ—Å—Ç–∏–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- **Spatial –∏–Ω–¥–µ–∫—Å—ã**: GiST –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞ –ø–æ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—é
- **–ì–µ–æ–º–µ—Ç—Ä–∏—á–µ—Å–∫–∏–µ —Ç–∏–ø—ã**: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ Point, LineString, Polygon –∏ –¥—Ä—É–≥–∏—Ö –≥–µ–æ–º–µ—Ç—Ä–∏–π

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –ø–µ—Ä–µ–¥ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–µ–π:
- **–¢–æ—á–Ω–æ—Å—Ç—å**: –ì–µ–æ–¥–µ–∑–∏—á–µ—Å–∫–∏–µ —Ä–∞—Å—á–µ—Ç—ã –≤–º–µ—Å—Ç–æ —Å—Ñ–µ—Ä–∏—á–µ—Å–∫–æ–π –∞–ø–ø—Ä–æ–∫—Å–∏–º–∞—Ü–∏–∏
- **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ PostGIS –∑–∞–ø—Ä–æ—Å—ã —Å –∏–Ω–¥–µ–∫—Å–∞–º–∏
- **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å**: –ü—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ –∞–ª–≥–æ—Ä–∏—Ç–º—ã –æ—Ç –ø—Ä–æ–µ–∫—Ç–∞ PostGIS
- **–†–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å**: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Å–ª–æ–∂–Ω—ã—Ö –≥–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

### –¢–∏–ø—ã –∑–∞–ø—Ä–æ—Å–æ–≤:
- `distance_lte(point, D(km=radius))` - –ø–æ–∏—Å–∫ –≤ —Ä–∞–¥–∏—É—Å–µ
- `distance_gte(point, D(km=radius))` - –ø–æ–∏—Å–∫ –∑–∞ –ø—Ä–µ–¥–µ–ª–∞–º–∏ —Ä–∞–¥–∏—É—Å–∞
- `contains(geometry)` - –ø—Ä–æ–≤–µ—Ä–∫–∞ containment
- `intersects(geometry)` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏—è
- `within(geometry)` - –ø–æ–∏—Å–∫ –≤–Ω—É—Ç—Ä–∏ –æ–±–ª–∞—Å—Ç–∏
- `overlaps(geometry)` - –ø–æ–∏—Å–∫ –ø–µ—Ä–µ—Å–µ–∫–∞—é—â–∏—Ö—Å—è –æ–±—ä–µ–∫—Ç–æ–≤

### –ü—Ä–∏–º–µ—Ä—ã SQL –∑–∞–ø—Ä–æ—Å–æ–≤ PostGIS:
```sql
-- –ü–æ–∏—Å–∫ —Ç–æ—á–µ–∫ –≤ —Ä–∞–¥–∏—É—Å–µ 5 –∫–º –æ—Ç –ú–æ—Å–∫–≤—ã
SELECT * FROM points_point
WHERE ST_DWithin(
    location,
    ST_GeomFromText('POINT(37.6176 55.7558)', 4326),
    5000
);

-- –†–∞—Å—á–µ—Ç —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è –º–µ–∂–¥—É —Ç–æ—á–∫–∞–º–∏
SELECT ST_Distance(
    ST_GeomFromText('POINT(37.6176 55.7558)', 4326),
    ST_GeomFromText('POINT(30.3146 59.9398)', 4326)
) / 1000 as distance_km;
```

## –í–∞–ª–∏–¥–∞—Ü–∏—è

- **–ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã**: –®–∏—Ä–æ—Ç–∞ –æ—Ç -90 –¥–æ 90, –¥–æ–ª–≥–æ—Ç–∞ –æ—Ç -180 –¥–æ 180
- **–†–∞–¥–∏—É—Å –ø–æ–∏—Å–∫–∞**: –î–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–º —á–∏—Å–ª–æ–º
- **–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è**: –î–ª—è —Ç–æ—á–µ–∫ - latitude, longitude, title; –¥–ª—è —Å–æ–æ–±—â–µ–Ω–∏–π - point, content

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
```bash
# –í—Å–µ —Ç–µ—Å—Ç—ã
python manage.py test

# –¢–µ—Å—Ç—ã –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
python manage.py test points

# –° –ø–æ–¥—Ä–æ–±–Ω—ã–º –≤—ã–≤–æ–¥–æ–º
python manage.py test points -v 2
```

### –ü–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏
- –°–æ–∑–¥–∞–Ω–∏–µ, —á—Ç–µ–Ω–∏–µ, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ, —É–¥–∞–ª–µ–Ω–∏–µ —Ç–æ—á–µ–∫
- –°–æ–∑–¥–∞–Ω–∏–µ –∏ —á—Ç–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π
- –ü–æ–∏—Å–∫ –ø–æ –≥–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–æ–º—É —Ä–∞–¥–∏—É—Å—É
- –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
- –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### Postman –∫–æ–ª–ª–µ–∫—Ü–∏—è

–î–ª—è —É–¥–æ–±–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è API –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–∞ Postman –∫–æ–ª–ª–µ–∫—Ü–∏—è:

1. **–ò–º–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ –∫–æ–ª–ª–µ–∫—Ü–∏—é**: `geo-points-api.postman_collection.json`
2. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è**:
   - `base_url`: `http://localhost:8000` (–∏–ª–∏ –≤–∞—à URL)
3. **–ù–∞—á–Ω–∏—Ç–µ —Å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏**: –í—ã–ø–æ–ª–Ω–∏—Ç–µ –∑–∞–ø—Ä–æ—Å "Login - Get JWT Token"
4. **–¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ API**: –í—Å–µ —Ç–æ–∫–µ–Ω—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

**–°–æ–¥–µ—Ä–∂–∏–º–æ–µ –∫–æ–ª–ª–µ–∫—Ü–∏–∏:**
- üîê **Authentication**: –ü–æ–ª—É—á–µ–Ω–∏–µ –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ JWT —Ç–æ–∫–µ–Ω–æ–≤
- üìç **Points API**: CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å —Ç–æ—á–∫–∞–º–∏, –ø–æ–∏—Å–∫ –ø–æ —Ä–∞–¥–∏—É—Å—É
- üí¨ **Messages API**: –†–∞–±–æ—Ç–∞ —Å —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏
- ‚ö†Ô∏è **Error Testing**: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫ –∏ edge cases

**–ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
1. –ò–º–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª `geo-points-api.postman_collection.json` –≤ Postman
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è `base_url` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ
3. –ù–∞—á–Ω–∏—Ç–µ —Å –∑–∞–ø—Ä–æ—Å–∞ "Login - Get JWT Token" - —Ç–æ–∫–µ–Ω—ã —Å–æ—Ö—Ä–∞–Ω—è—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
4. –í—ã–ø–æ–ª–Ω—è–π—Ç–µ –∑–∞–ø—Ä–æ—Å—ã –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ - –æ–Ω–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ

üìñ **–ü–æ–¥—Ä–æ–±–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ**: —Å–º. `POSTMAN_GUIDE.md`

### Python –∫–ª–∏–µ–Ω—Ç

```python
import requests

# –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞
auth_response = requests.post('http://127.0.0.1:8000/api/token/', json={
    'username': 'your_username',
    'password': 'your_password'
})
token = auth_response.json()['access']

headers = {'Authorization': f'Bearer {token}'}

# –°–æ–∑–¥–∞–Ω–∏–µ —Ç–æ—á–∫–∏
point_data = {
    'latitude': 55.7558,
    'longitude': 37.6176,
    'title': '–ö—Ä–∞—Å–Ω–∞—è –ø–ª–æ—â–∞–¥—å',
    'description': '–ì–ª–∞–≤–Ω–∞—è –ø–ª–æ—â–∞–¥—å –ú–æ—Å–∫–≤—ã'
}
response = requests.post('http://127.0.0.1:8000/api/points/',
                        json=point_data, headers=headers)

# –ü–æ–∏—Å–∫ —Ç–æ—á–µ–∫ –≤ —Ä–∞–¥–∏—É—Å–µ 1 –∫–º
search_response = requests.get(
    'http://127.0.0.1:8000/api/points/search/',
    params={'latitude': 55.7558, 'longitude': 37.6176, 'radius': 1.0},
    headers=headers
)
```

### curl –ø—Ä–∏–º–µ—Ä—ã

```bash
# –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞
curl -X POST http://127.0.0.1:8000/api/token/ \
  -H "Content-Type: application/json" \
  -d '{"username": "your_username", "password": "your_password"}'

# –°–æ–∑–¥–∞–Ω–∏–µ —Ç–æ—á–∫–∏
curl -X POST http://127.0.0.1:8000/api/points/ \
  -H "Authorization: Bearer YOUR_JWT_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "latitude": 55.7558,
    "longitude": 37.6176,
    "title": "–ö—Ä–∞—Å–Ω–∞—è –ø–ª–æ—â–∞–¥—å",
    "description": "–ì–ª–∞–≤–Ω–∞—è –ø–ª–æ—â–∞–¥—å –ú–æ—Å–∫–≤—ã"
  }'

# –ü–æ–∏—Å–∫ —Ç–æ—á–µ–∫ –≤ —Ä–∞–¥–∏—É—Å–µ
curl -X GET "http://127.0.0.1:8000/api/points/search/?latitude=55.7558&longitude=37.6176&radius=1.0" \
  -H "Authorization: Bearer YOUR_JWT_TOKEN"
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
geo_points/
‚îú‚îÄ‚îÄ geo_points/                         # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ Django –ø—Ä–æ–µ–∫—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ settings.py                     # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å GeoDjango + PostGIS
‚îÇ   ‚îú‚îÄ‚îÄ urls.py
‚îÇ   ‚îî‚îÄ‚îÄ wsgi.py
‚îú‚îÄ‚îÄ points/                             # –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –≥–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏—Ö —Ç–æ—á–µ–∫
‚îÇ   ‚îú‚îÄ‚îÄ models.py                       # GeoDjango –º–æ–¥–µ–ª–∏ Point –∏ Message
‚îÇ   ‚îú‚îÄ‚îÄ views.py                        # API ViewSets —Å –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ –∑–∞–ø—Ä–æ—Å–∞–º–∏
‚îÇ   ‚îú‚îÄ‚îÄ serializers.py                  # –°–µ—Ä–∏–∞–ª–∏–∑–∞—Ç–æ—Ä—ã –¥–ª—è –≥–µ–æ–¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îú‚îÄ‚îÄ tests.py                        # –¢–µ—Å—Ç—ã API
‚îÇ   ‚îî‚îÄ‚îÄ migrations/                     # –ú–∏–≥—Ä–∞—Ü–∏–∏ PostGIS
‚îú‚îÄ‚îÄ docker/
‚îÇ   ‚îú‚îÄ‚îÄ Dockerfile                      # Python + GDAL/GEOS –æ–±—Ä–∞–∑
‚îÇ   ‚îú‚îÄ‚îÄ docker-compose.yml              # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ .dockerignore                   # –ò—Å–∫–ª—é—á–∞–µ–º—ã–µ —Ñ–∞–π–ª—ã –¥–ª—è Docker
‚îÇ   ‚îî‚îÄ‚îÄ entrypoint.sh                   # –°–∫—Ä–∏–ø—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ Django
‚îú‚îÄ‚îÄ manage.py
‚îú‚îÄ‚îÄ requirements.txt                    # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ GeoDjango
‚îú‚îÄ‚îÄ docker-env-example.txt              # –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ geo-points-api.postman_collection.json    # Postman –∫–æ–ª–ª–µ–∫—Ü–∏—è
‚îú‚îÄ‚îÄ POSTMAN_GUIDE.md                    # –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é
‚îú‚îÄ‚îÄ COMMANDS.md                         # –ö—Ä–∞—Ç–∫–∞—è —Å–ø—Ä–∞–≤–∫–∞ –ø–æ –∫–æ–º–∞–Ω–¥–∞–º
‚îú‚îÄ‚îÄ start.sh                            # –°–∫—Ä–∏–ø—Ç –±—ã—Å—Ç—Ä–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
‚îî‚îÄ‚îÄ README.md                           # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –í—Å–µ API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã —Ç—Ä–µ–±—É—é—Ç –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Ç–æ–ª—å–∫–æ —Å–æ —Å–≤–æ–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏
- JWT —Ç–æ–∫–µ–Ω—ã –∏–º–µ—é—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–µ –≤—Ä–µ–º—è –∂–∏–∑–Ω–∏
- –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Å–µ—Ö –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

## –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ GeoDjango + PostGIS:
- **Spatial –∏–Ω–¥–µ–∫—Å—ã**: GiST –∏–Ω–¥–µ–∫—Å—ã –Ω–∞ –≥–µ–æ–º–µ—Ç—Ä–∏—á–µ—Å–∫–∏—Ö –ø–æ–ª—è—Ö –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞
- **PostGIS –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏**: –ù–∞—Ç–∏–≤–Ω—ã–µ C-—Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –≥–µ–æ–º–µ—Ç—Ä–∏—á–µ—Å–∫–∏—Ö —Ä–∞—Å—á–µ—Ç–æ–≤
- **–ö–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö**: –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∫–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏–∏ –ø–æ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ–Ω–Ω—ã–º –¥–∞–Ω–Ω—ã–º
- **–ü–∞–≥–∏–Ω–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤**: –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–∞—è –ø–∞–≥–∏–Ω–∞—Ü–∏—è –¥–ª—è –±–æ–ª—å—à–∏—Ö –Ω–∞–±–æ—Ä–æ–≤ –¥–∞–Ω–Ω—ã—Ö

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –ø–µ—Ä–µ–¥ –æ–±—ã—á–Ω—ã–º–∏ –∑–∞–ø—Ä–æ—Å–∞–º–∏:
- **–ë—ã—Å—Ç—Ä—ã–π –ø–æ–∏—Å–∫ –ø–æ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—é**: O(log n) –≤–º–µ—Å—Ç–æ O(n) –¥–ª—è –±–æ–ª—å—à–∏—Ö –Ω–∞–±–æ—Ä–æ–≤
- **–¢–æ—á–Ω—ã–µ —Ä–∞—Å—á–µ—Ç—ã**: –ì–µ–æ–¥–µ–∑–∏—á–µ—Å–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ –≤–º–µ—Å—Ç–æ —Ç—Ä–∏–≥–æ–Ω–æ–º–µ—Ç—Ä–∏—á–µ—Å–∫–∏—Ö –∞–ø–ø—Ä–æ–∫—Å–∏–º–∞—Ü–∏–π
- **–ò–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã**: PostGIS –∏—Å–ø–æ–ª—å–∑—É–µ—Ç R-–¥–µ—Ä–µ–≤—å—è –¥–ª—è –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

## –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –≤ Docker

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ Docker —Å–µ—Ä–≤–∏—Å–æ–≤

- **web**: Django –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (Python 3.11, Django 5.1 —Å GeoDjango)
- **db**: PostgreSQL 15 + PostGIS 3.4 (–ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ–Ω–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö)
- **pgadmin**: pgAdmin 4 –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è PostgreSQL

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å `docker-env-example.txt` –≤ `.env` –∏ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å:

```bash
# Django –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
DEBUG=True
SECRET_KEY=your-secret-key

# PostgreSQL –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
POSTGRES_DB=geo_points
POSTGRES_USER=your_db_user
POSTGRES_PASSWORD=your_secure_password
POSTGRES_HOST=db
POSTGRES_PORT=5432

# pgAdmin –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (–≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ë–î)
PGADMIN_DEFAULT_EMAIL=admin@geo-points.com
PGADMIN_DEFAULT_PASSWORD=admin123
```

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞–º–∏

```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
docker-compose logs -f

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–µ—Ä–≤–∏—Å–æ–≤
docker-compose down

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å –ø–µ—Ä–µ—Å–±–æ—Ä–∫–æ–π
docker-compose up --build

# –û—á–∏—Å—Ç–∫–∞ (—É–¥–∞–ª–µ–Ω–∏–µ volumes)
docker-compose down -v
```

### –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –≤ Docker

–í—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ —É–∂–µ –≤–∫–ª—é—á–µ–Ω—ã –≤ –æ—Å–Ω–æ–≤–Ω–æ–π `docker-compose.yml`:

```bash
# –ó–∞–ø—É—Å–∫ —Å –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –∫–æ–¥–∞ (hot reload)
docker-compose up

# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
docker-compose exec web python manage.py test

# –°–æ–∑–¥–∞–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π
docker-compose exec web python manage.py makemigrations

# –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –±–ª–∞–≥–æ–¥–∞—Ä—è volume –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—é
```

## –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞

–í–æ–∑–º–æ–∂–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è –∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è:

### –£–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:
- ‚úÖ **GeoDjango + PostGIS**: –ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω–∞—è –≥–µ–æ–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞
- ‚úÖ **pgAdmin**: –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ë–î
- ‚úÖ **Docker**: –ü–æ–ª–Ω–∞—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è
- ‚úÖ **JWT**: –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

### –í–æ–∑–º–æ–∂–Ω—ã–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è:
1. **Redis**: –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –≥–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ —Å–µ—Å—Å–∏–∏
2. **Nginx**: Reverse proxy, –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞ –Ω–∞–≥—Ä—É–∑–∫–∏, —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã
3. **Celery**: –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≥–µ–æ–¥–∞–Ω–Ω—ã—Ö –∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
4. **WebSockets**: –†–µ–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –¥–ª—è –≥–µ–æ–ª–æ–∫–∞—Ü–∏–æ–Ω–Ω—ã—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
5. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**: Prometheus + Grafana –¥–ª—è –º–µ—Ç—Ä–∏–∫ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
6. **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –≥–µ–æ–º–µ—Ç—Ä–∏–∏**: LineString, Polygon –¥–ª—è –º–∞—Ä—à—Ä—É—Ç–æ–≤ –∏ –∑–æ–Ω
7. **Spatial –∞–Ω–∞–ª–∏—Ç–∏–∫–∞**: –ö–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏—è, –±—É—Ñ–µ—Ä–Ω—ã–µ –∑–æ–Ω—ã, –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏—è
8. **Mapbox/GL**: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∫–∞—Ä—Ç–∞–º–∏ –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏
9. **Geofencing**: –û–ø–æ–≤–µ—â–µ–Ω–∏—è –ø—Ä–∏ –≤—Ö–æ–¥–µ/–≤—ã—Ö–æ–¥–µ –∏–∑ –≥–µ–æ–∑–æ–Ω
10. **–ò—Å—Ç–æ—Ä–∏—è –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–π**: –¢—Ä–µ–∫–∏–Ω–≥ –∏ –∞–Ω–∞–ª–∏–∑ —Ç—Ä–∞–µ–∫—Ç–æ—Ä–∏–π

---

## üìã –°–≤–æ–¥–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π

### ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:
- **GeoDjango + PostGIS**: –ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω–∞—è –ì–ò–° –≤–º–µ—Å—Ç–æ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
- **pgAdmin**: –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è PostgreSQL
- **Docker Compose**: –ü–æ–ª–Ω–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö
- **Postman –∫–æ–ª–ª–µ–∫—Ü–∏—è**: –ö–æ–º–ø–ª–µ–∫—Å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API
- **JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è**: –ë–µ–∑–æ–ø–∞—Å–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ API
- **RESTful API**: –ü–æ–ª–Ω—ã–π CRUD —Å –≥–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏

### üöÄ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –Ω–æ–≤–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã:
- **–¢–æ—á–Ω–æ—Å—Ç—å**: –ì–µ–æ–¥–µ–∑–∏—á–µ—Å–∫–∏–µ —Ä–∞—Å—á–µ—Ç—ã –≤–º–µ—Å—Ç–æ –ø—Ä–∏–±–ª–∏–∂–µ–Ω–Ω—ã—Ö —Ñ–æ—Ä–º—É–ª
- **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: Spatial –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞
- **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å**: PostGIS - –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω–∞—è –≥–µ–æ–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞
- **–£–¥–æ–±—Å—Ç–≤–æ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏**: pgAdmin –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã–º–∏
- **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å**: Docker –¥–ª—è –ª–µ–≥–∫–æ–≥–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è

–ü—Ä–æ–µ–∫—Ç –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –∏ –¥–∞–ª—å–Ω–µ–π—à–µ–º—É —Ä–∞–∑–≤–∏—Ç–∏—é! üéØ
